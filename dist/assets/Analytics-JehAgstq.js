import{s as n,j as e}from"./index-CZWYOJc5.js";import{r as i}from"./vendor-C93i42Td.js";import{k as U,t as A,w as x,x as D,g as C,n as L}from"./ui-DKXepuIc.js";const P=()=>{const[h,b]=i.useState("7d"),[a,g]=i.useState(!0),[r,N]=i.useState({totalUsers:0,totalVideos:0,averageProcessingTime:0,totalRevenue:0,recentActivity:[]});i.useEffect(()=>{p()},[h]);const p=async()=>{try{g(!0);const{count:s,error:l}=await n.from("profiles").select("*",{count:"exact",head:!0});if(l)throw l;const{count:d,error:u}=await n.from("videos").select("*",{count:"exact",head:!0});if(u)throw u;const{data:t,error:j}=await n.from("videos").select("created_at, updated_at").eq("status","completed");if(j)throw j;const y=(t==null?void 0:t.reduce((m,c)=>{const S=new Date(c.created_at),E=new Date(c.updated_at);return m+(E-S)},0))/((t==null?void 0:t.length)||1),{data:o,error:f}=await n.from("payment_transactions").select("amount").eq("status","completed");if(f)throw f;const T=(o==null?void 0:o.reduce((m,c)=>m+c.amount,0))||0;N({totalUsers:s||0,totalVideos:d||0,averageProcessingTime:y||0,totalRevenue:T,recentActivity:[]})}catch(s){console.error("Error fetching analytics:",s),U.error("Failed to load analytics data")}finally{g(!1)}},v=s=>{const l=Math.floor(s/6e4),d=(s%6e4/1e3).toFixed(0);return`${l}:${d.padStart(2,"0")}`},w=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s);return e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Analytics"}),e.jsx("div",{className:"flex gap-2",children:["7d","30d","90d"].map(s=>e.jsx("button",{onClick:()=>b(s),className:`px-4 py-2 rounded-lg transition-colors ${h===s?"bg-blue-600 text-white":"bg-white text-gray-600 hover:bg-gray-50"}`,children:s==="7d"?"Last 7 Days":s==="30d"?"Last 30 Days":"Last 90 Days"},s))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:e.jsx(A,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"text-sm text-green-600 flex items-center gap-1",children:[e.jsx(x,{className:"w-4 h-4"}),"10%"]})]}),e.jsx("span",{className:"text-gray-600 text-sm",children:"Total Users"}),e.jsx("div",{className:"text-2xl font-bold mt-1",children:a?e.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse w-24"}):r.totalUsers.toLocaleString()})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:e.jsx(D,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"text-sm text-green-600 flex items-center gap-1",children:[e.jsx(x,{className:"w-4 h-4"}),"15%"]})]}),e.jsx("span",{className:"text-gray-600 text-sm",children:"Total Videos"}),e.jsx("div",{className:"text-2xl font-bold mt-1",children:a?e.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse w-24"}):r.totalVideos.toLocaleString()})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:e.jsx(C,{className:"w-6 h-6 text-blue-600"})})}),e.jsx("span",{className:"text-gray-600 text-sm",children:"Avg. Processing Time"}),e.jsx("div",{className:"text-2xl font-bold mt-1",children:a?e.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse w-24"}):v(r.averageProcessingTime)})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:e.jsx(L,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"text-sm text-green-600 flex items-center gap-1",children:[e.jsx(x,{className:"w-4 h-4"}),"20%"]})]}),e.jsx("span",{className:"text-gray-600 text-sm",children:"Total Revenue"}),e.jsx("div",{className:"text-2xl font-bold mt-1",children:a?e.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse w-24"}):w(r.totalRevenue)})]})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Video Generation Trends"}),e.jsx("div",{className:"h-[300px] flex items-center justify-center text-gray-500",children:"Chart coming soon..."})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Revenue Growth"}),e.jsx("div",{className:"h-[300px] flex items-center justify-center text-gray-500",children:"Chart coming soon..."})]})]})]})};export{P as default};
//# sourceMappingURL=Analytics-JehAgstq.js.map
