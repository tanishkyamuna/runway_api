import{s as d,j as r}from"./index-CZWYOJc5.js";import{u as T,r as a}from"./vendor-C93i42Td.js";import{k as n,P as E}from"./ui-DKXepuIc.js";const $=()=>{const c=T(),[i,v]=a.useState("all"),[u,f]=a.useState([]),[m,g]=a.useState(!0),[_,x]=a.useState(null),[C,p]=a.useState(null),y=[{id:"all",name:"All Templates"},{id:"exterior",name:"Exterior"},{id:"interior",name:"Interior"},{id:"commercial",name:"Commercial"},{id:"luxury",name:"Luxury"}];a.useEffect(()=>{b()},[i]);const b=async()=>{try{g(!0),x(null);let e=d.from("templates").select("*").order("created_at",{ascending:!1});i!=="all"&&(e=e.eq("category",i));const{data:t,error:s}=await e;if(s)throw s;const l=(t||[]).map(o=>({...o,orientation:o.orientation||(o.title.toLowerCase().includes("portrait")||o.title.toLowerCase().includes("vertical")||o.title.toLowerCase().includes("interior flow")?"portrait":"landscape")}));f(l)}catch(e){console.error("Error fetching templates:",e),x("Failed to load templates"),n.error("Failed to load templates")}finally{g(!1)}},h=async e=>{try{const{data:{user:t}}=await d.auth.getUser();if(!t){n.error("Please sign in to create videos"),c("/login",{state:{returnTo:"/create"}});return}const{data:s,error:l}=await d.from("user_credits").select("free_videos_remaining").eq("user_id",t.id).single();if(l)throw l;if(!s||s.free_videos_remaining<=0){n.error("No credits remaining. Please upgrade your plan."),c("/pricing");return}c("/create",{state:{template:e}})}catch(t){console.error("Error:",t),n.error("Failed to start video creation")}},j=e=>e.orientation==="portrait"?"aspect-[9/16]":"aspect-video",w=async e=>{p(e.id);const t=document.querySelector(`#video-${e.id}`);if(t)try{t.currentTime=0,t.style.opacity="1",await t.play()}catch(s){console.log("Video autoplay prevented:",s)}},N=e=>{p(null);const t=document.querySelector(`#video-${e.id}`);t&&(t.style.opacity="0",t.pause(),t.currentTime=0)};return r.jsx("div",{className:"min-h-screen bg-gray-50 py-12",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Video Templates"}),r.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"Choose from our collection of professional video templates"}),r.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-8",children:y.map(e=>r.jsx("button",{onClick:()=>v(e.id),className:`px-4 py-2 rounded-full transition-colors ${i===e.id?"bg-blue-600 text-white":"bg-white text-gray-600 hover:bg-gray-100"}`,children:e.name},e.id))})]}),m?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[1,2,3,4,5,6].map(e=>r.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden animate-pulse",children:[r.jsx("div",{className:`${e%3===0?"aspect-[9/16]":"aspect-video"} bg-gray-200`}),r.jsxs("div",{className:"p-6",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-full mb-6"}),r.jsx("div",{className:"h-10 bg-gray-200 rounded"})]})]},e))}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:u.map(e=>r.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden group",onMouseEnter:()=>w(e),onMouseLeave:()=>N(e),children:[r.jsxs("div",{className:`relative ${j(e)}`,children:[r.jsx("img",{src:e.image_url,alt:e.title,className:"absolute inset-0 w-full h-full object-cover",onError:t=>{t.target.src=`https://via.placeholder.com/${e.orientation==="portrait"?"400x600":"600x400"}?text=Template+Preview`}}),e.video_preview_url&&r.jsx("video",{id:`video-${e.id}`,src:e.video_preview_url,className:"absolute inset-0 w-full h-full object-cover opacity-0 transition-opacity duration-300",muted:!0,loop:!0,playsInline:!0,preload:"metadata"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent flex items-end",children:r.jsxs("div",{className:"p-4 text-white",children:[r.jsx("h3",{className:"text-lg font-bold",children:e.title}),r.jsxs("p",{className:"text-sm text-gray-200",children:[e.duration||"10"," seconds"]})]})}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:r.jsx("button",{className:"bg-white/20 backdrop-blur-sm rounded-full p-4 hover:bg-white/30 transition-colors",onClick:t=>{t.stopPropagation(),h(e)},children:r.jsx(E,{className:"w-8 h-8 text-white"})})})]}),r.jsxs("div",{className:"p-6",children:[r.jsx("p",{className:"text-gray-600 mb-4",children:e.description}),r.jsx("button",{onClick:()=>h(e),className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:"Use This Template"})]})]},e.id))}),u.length===0&&!m&&r.jsx("div",{className:"text-center text-gray-500 py-12",children:"No templates found for this category"})]})})};export{$ as default};
//# sourceMappingURL=TemplatesGallery-LtA3pksi.js.map
