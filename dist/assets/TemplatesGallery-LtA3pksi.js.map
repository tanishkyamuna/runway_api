{"version":3,"file":"TemplatesGallery-LtA3pksi.js","sources":["../../src/components/TemplatesGallery.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Play, Sliders, Download, Star, ArrowRight } from 'lucide-react';\nimport toast from 'react-hot-toast';\nimport { supabase } from '../lib/supabase';\n\nconst TemplatesGallery = () => {\n  const navigate = useNavigate();\n  const [selectedCategory, setSelectedCategory] = useState('all');\n  const [templates, setTemplates] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [hoveredTemplate, setHoveredTemplate] = useState(null);\n\n  const categories = [\n    { id: 'all', name: 'All Templates' },\n    { id: 'exterior', name: 'Exterior' },\n    { id: 'interior', name: 'Interior' },\n    { id: 'commercial', name: 'Commercial' },\n    { id: 'luxury', name: 'Luxury' }\n  ];\n\n  useEffect(() => {\n    fetchTemplates();\n  }, [selectedCategory]);\n\n  const fetchTemplates = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      \n      let query = supabase\n        .from('templates')\n        .select('*')\n        .order('created_at', { ascending: false });\n\n      if (selectedCategory !== 'all') {\n        query = query.eq('category', selectedCategory);\n      }\n\n      const { data, error } = await query;\n      if (error) throw error;\n      \n      const transformedData = (data || []).map(template => ({\n        ...template,\n        orientation: template.orientation || (\n          template.title.toLowerCase().includes('portrait') || \n          template.title.toLowerCase().includes('vertical') ||\n          template.title.toLowerCase().includes('interior flow')\n            ? 'portrait'\n            : 'landscape'\n        )\n      }));\n      \n      setTemplates(transformedData);\n    } catch (error) {\n      console.error('Error fetching templates:', error);\n      setError('Failed to load templates');\n      toast.error('Failed to load templates');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleTemplateSelect = async (template) => {\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) {\n        toast.error('Please sign in to create videos');\n        navigate('/login', { state: { returnTo: '/create' } });\n        return;\n      }\n\n      const { data: credits, error } = await supabase\n        .from('user_credits')\n        .select('free_videos_remaining')\n        .eq('user_id', user.id)\n        .single();\n\n      if (error) throw error;\n\n      if (!credits || credits.free_videos_remaining <= 0) {\n        toast.error('No credits remaining. Please upgrade your plan.');\n        navigate('/pricing');\n        return;\n      }\n\n      navigate('/create', { state: { template } });\n    } catch (error) {\n      console.error('Error:', error);\n      toast.error('Failed to start video creation');\n    }\n  };\n\n  const getTemplateAspectRatio = (template) => {\n    return template.orientation === 'portrait' ? 'aspect-[9/16]' : 'aspect-video';\n  };\n\n  const handleMouseEnter = async (template) => {\n    setHoveredTemplate(template.id);\n    \n    // Preload and play video\n    const videoElement = document.querySelector(`#video-${template.id}`);\n    if (videoElement) {\n      try {\n        // Reset video to start\n        videoElement.currentTime = 0;\n        \n        // Show video\n        videoElement.style.opacity = '1';\n        \n        // Attempt to play\n        await videoElement.play();\n      } catch (error) {\n        console.log('Video autoplay prevented:', error);\n      }\n    }\n  };\n\n  const handleMouseLeave = (template) => {\n    setHoveredTemplate(null);\n    \n    // Hide and pause video\n    const videoElement = document.querySelector(`#video-${template.id}`);\n    if (videoElement) {\n      videoElement.style.opacity = '0';\n      videoElement.pause();\n      videoElement.currentTime = 0;\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 py-12\">\n      <div className=\"max-w-7xl mx-auto px-4\">\n        <div className=\"text-center mb-12\">\n          <h1 className=\"text-4xl font-bold mb-4\">Video Templates</h1>\n          <p className=\"text-xl text-gray-600 mb-8\">\n            Choose from our collection of professional video templates\n          </p>\n\n          <div className=\"flex flex-wrap justify-center gap-2 mb-8\">\n            {categories.map(category => (\n              <button\n                key={category.id}\n                onClick={() => setSelectedCategory(category.id)}\n                className={`px-4 py-2 rounded-full transition-colors ${\n                  selectedCategory === category.id\n                    ? 'bg-blue-600 text-white'\n                    : 'bg-white text-gray-600 hover:bg-gray-100'\n                }`}\n              >\n                {category.name}\n              </button>\n            ))}\n          </div>\n        </div>\n\n        {loading ? (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\n            {[1, 2, 3, 4, 5, 6].map((n) => (\n              <div key={n} className=\"bg-white rounded-xl shadow-lg overflow-hidden animate-pulse\">\n                <div className={`${n % 3 === 0 ? 'aspect-[9/16]' : 'aspect-video'} bg-gray-200`}></div>\n                <div className=\"p-6\">\n                  <div className=\"h-4 bg-gray-200 rounded w-3/4 mb-4\"></div>\n                  <div className=\"h-4 bg-gray-200 rounded w-full mb-6\"></div>\n                  <div className=\"h-10 bg-gray-200 rounded\"></div>\n                </div>\n              </div>\n            ))}\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\n            {templates.map(template => (\n              <div\n                key={template.id}\n                className=\"bg-white rounded-xl shadow-lg overflow-hidden group\"\n                onMouseEnter={() => handleMouseEnter(template)}\n                onMouseLeave={() => handleMouseLeave(template)}\n              >\n                <div className={`relative ${getTemplateAspectRatio(template)}`}>\n                  {/* Static Image */}\n                  <img \n                    src={template.image_url}\n                    alt={template.title}\n                    className=\"absolute inset-0 w-full h-full object-cover\"\n                    onError={(e) => {\n                      e.target.src = `https://via.placeholder.com/${template.orientation === 'portrait' ? '400x600' : '600x400'}?text=Template+Preview`;\n                    }}\n                  />\n                  \n                  {/* Video Preview */}\n                  {template.video_preview_url && (\n                    <video\n                      id={`video-${template.id}`}\n                      src={template.video_preview_url}\n                      className=\"absolute inset-0 w-full h-full object-cover opacity-0 transition-opacity duration-300\"\n                      muted\n                      loop\n                      playsInline\n                      preload=\"metadata\"\n                    />\n                  )}\n\n                  {/* Overlay */}\n                  <div className=\"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent flex items-end\">\n                    <div className=\"p-4 text-white\">\n                      <h3 className=\"text-lg font-bold\">{template.title}</h3>\n                      <p className=\"text-sm text-gray-200\">\n                        {template.duration || '10'} seconds\n                      </p>\n                    </div>\n                  </div>\n                  \n                  {/* Play Button */}\n                  <div className=\"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity\">\n                    <button \n                      className=\"bg-white/20 backdrop-blur-sm rounded-full p-4 hover:bg-white/30 transition-colors\"\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        handleTemplateSelect(template);\n                      }}\n                    >\n                      <Play className=\"w-8 h-8 text-white\" />\n                    </button>\n                  </div>\n                </div>\n\n                <div className=\"p-6\">\n                  <p className=\"text-gray-600 mb-4\">{template.description}</p>\n                  <button\n                    onClick={() => handleTemplateSelect(template)}\n                    className=\"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2\"\n                  >\n                    Use This Template\n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n\n        {templates.length === 0 && !loading && (\n          <div className=\"text-center text-gray-500 py-12\">\n            No templates found for this category\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default TemplatesGallery;"],"names":["TemplatesGallery","navigate","useNavigate","selectedCategory","setSelectedCategory","useState","templates","setTemplates","loading","setLoading","error","setError","hoveredTemplate","setHoveredTemplate","categories","useEffect","fetchTemplates","query","supabase","data","transformedData","template","toast","handleTemplateSelect","user","credits","getTemplateAspectRatio","handleMouseEnter","videoElement","handleMouseLeave","jsxs","jsx","category","n","e","Play"],"mappings":"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"}